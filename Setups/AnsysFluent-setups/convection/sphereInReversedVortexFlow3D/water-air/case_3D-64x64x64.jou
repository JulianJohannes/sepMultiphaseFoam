(define cutoff 1e-08)
;
(define density_air 1.19)
(define viscosity_air 0.000018207)
(define density_droplet 998.2)
(define viscosity_droplet 0.0009982)
;
; filename variables are not expanded...
(rp-var-define 'meshfile "../mesh/3D-1x1x1-64x64x64.msh" 'string #f)
(rp-var-define 'casefile "fluent-64x64x64.cas" 'string #f)
(rp-var-define 'outputfile0 "output64x64x64/out-0.0.log" 'string #f)
(rp-var-define 'outputfile4 "output64x64x64/out-4.0.log" 'string #f)
(rp-var-define 'transcriptfile "fluent-64x64x64.log" 'string #f)
;
(define time_step 1e-05)
(define niter 300000)
(define ntimestepiter 2); max. number of iterations per time step
;
file/confirm-overwrite? no
;
(ti-menu-load-string (format #f "/file/start-transcript ~s" (rpgetvar 'transcriptfile)))
;
(ti-menu-load-string (format #f "/file/read-case ~s" (rpgetvar 'meshfile)))
;-----------------------------------
/define/materials/change-create
air
air
yes
constant
density_air ; density
no
no
yes
constant
viscosity_air ; viscosity
no
no
no
/define/materials/change-create
air ; default name
droplet ; the new name
yes
constant
density_droplet ; density
no
no
yes
constant
viscosity_droplet ; viscosity
no
no
no
no; do not overwrite air but create a new fluid
;-----------------------------------
/define/models/viscous/laminar? yes
/define/models/multiphase/model/vof
/define/phases/phase-domain/
phase-1
air
yes ; material-name [air]: Change current value? [no]
air
/define/phases/phase-domain/
phase-2
droplet
yes
droplet
;-------------------------------------------------------------------
/define/models/multiphase/volume-fraction-parameters
explicit ; vof formulation, default
0.25 ; courant number, default
cutoff ; specify volume fraction cutoff
/define/phases/interaction-domain
0; Number of Mass Transfer Mechanisms [0] 
no ; Surface Tension Force Modeling [yes] 
;---------------------------------------------------------------------------
;//define/boundary-conditions/fluid domain mixture no yes no yes 1 yes 1 yes 1 no no 0. no 0. no 0. no 0 no 0 no 1 no no no no 
/define/boundary-conditions/fluid
domain
mixture
no
yes
no
yes
"2*cos(PI*t/3[s])*sin(2*PI*z/1[m])*sin(PI*x/1[m])*sin(PI*x/1[m])*sin(2*PI*y/1[m])"
yes
"-1*cos(PI*t/3[s])*sin(2*PI*z/1[m])*sin(PI*y/1[m])*sin(PI*y/1[m])*sin(2*PI*x/1[m])"
yes
"-1*cos(PI*t/3[s])*sin(2*PI*x/1[m])*sin(PI*z/1[m])*sin(PI*z/1[m])*sin(2*PI*y/1[m])"
no 
no
0. 
no 
0. 
no 
0. 
no 
0 
no 
0 
no 
1 
no 
no 
no 
no
;---------------------------------------------------------------------------
/define/boundary-conditions/zone-type boundary wall
;----------------------------------------------------------------------------
/solve/set/p-v-coupling 22;20 SIMPLE 21 SIMPLEC 22 PISO 23 Coupled
;/solve/set/under-relaxation/mom 1
;/solve/set/under-relaxation/body-force 1
;/solve/set/under-relaxation/density 1
;/solve/set/under-relaxation/pressure 1
;----------------------------------------------------------------------------
/solve/set/equations
flow
yes
mp
yes
;----------------------------------------------------------------------------
/define/custom-field-functions/load "patch-functions.scm"
/solve/initialize/vof-patch-smooth-options/set-options/patch-reconstructed-interface? yes
yes; smoothing? --> will be performed only with /solve/initialize/vof-patch-smooth-options/execute-smoothing
0.25; relaxation factor
/solve/initialize/hyb-initialization ; use "file/confirm-overwrite? no" to discard data
/solve/patch
droplet
domain
()
mp
yes
droplet3d
/solve/initialize/vof-patch-smooth-options/execute-smoothing
(ti-menu-load-string (format #f "/file/export/ascii ~s () yes droplet-vof quit yes" (rpgetvar 'outputfile0))); export initial data (no file name appendix)
;----------------------------------------------------------------------------
;/solve/initialize/hyb-initialization ; this only works from a fresh case, otherwise it will ask if data shall be discarded
;/solve/initialize/vof-patch-smooth-options/execute-smoothing
/solve/monitors/residual/check-convergence? no no no
;/solve/monitors/residual/criterion-type 1; relative
;/solve/monitors/residual/relative-conv-criteria
;0.001; continuity
;0.001; x-velocity
;0.001; y-velocity
/solve/monitors/residual/plot? no
/solve/set/time-step time_step
(ti-menu-load-string (format #f "/file/write-case ~s" (rpgetvar 'casefile)))
;----------------------------------------------------------------------------
/solve/dual-time-iterate niter ntimestepiter
;----------------------------------------------------------------------------
;file/confirm-overwrite? no
;(ti-menu-load-string (format #f "/report/surface-integrals/facet-max (1) mixture velocity-magnitude yes ~s\n" (rpgetvar 'reportfilemax)))
;(ti-menu-load-string (format #f "/report/surface-integrals/facet-min (1) mixture velocity-magnitude yes ~s\n" (rpgetvar 'reportfilemin)))
;(ti-menu-load-string (format #f "/report/surface-integrals/standard-deviation (1) mixture velocity-magnitude yes ~s\n" (rpgetvar 'reportfilestd)))
;----------------------------------------------------------------------------
(ti-menu-load-string (format #f "/file/export/ascii ~s () yes droplet-vof quit yes" (rpgetvar 'outputfile4))); export final data (no file name appendix)
;----------------------------------------------------------------------------
(ti-menu-load-string (format #f "/file/write-case-data ~s" (rpgetvar 'casefile)))
;
/file/stop-transcript
exit
